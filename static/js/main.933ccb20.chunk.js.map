{"version":3,"sources":["services/filecoin/index.js","views/Home.js","components/Summary.js","components/WindowPoStStatus.js","views/Status.js","components/WindowPoSt.js","views/Full.js","components/MinerBar.js","views/Deadline.js","views/MinerInfo.js","services/drand/index.js","components/TinySummary.js","App.js","serviceWorker.js","index.js"],"names":["d3","require","f","format","b64","bx","BN","schema","testnet","fullNode","b64ToBn","window","BigInt","bin","atob","hex","split","forEach","ch","h","charCodeAt","toString","length","push","join","partitionSchema","height","Sectors","Unproven","Faults","Recoveries","Terminated","ExpirationEpochs","EarlyTerminated","LivePower","a","b","UnprovenPower","FaultyPower","RecoveringPower","preCommitSchema","type","key","value","info","seal_proof","sector_number","sealed_cid","seal_rand_epoch","deal_ids","expiration","replace_capacity","replace_sector_deadline","replace_sector_partition","replace_sector_number","precommit_deposit","precommit_epoch","deal_weight","verified_deal_weight","bytesToBig","p","acc","i","bytesToBigRev","mul","add","nextBits","obj","n","res","num","and","shln","sub","shrn","left","toNumber","decodeRLE2","buf","first","x","s","Error","runs","decodeRLE","cur","r","Filecoin","endpointUrl","this","url","provider","BrowserProvider","console","log","client","LotusRPC","head","path","state","Blocks","ParentStateRoot","node","Height","chainGetNode","data","Obj","self","Fil","methods","decode","asObject","chainHead","cid","map","partitionRaw","partitionObj","reduce","curr","ChainGetTipSetByHeight","storagePowerActorRaw","TotalRawBytePower","TotalBytesCommitted","TotalQualityAdjPower","TotalQABytesCommitted","TotalPledgeCollateral","ThisEpochRawBytePower","ThisEpochQualityAdjPower","ThisEpochPledgeCollateral","hash","StateReadState","Cids","precommitdeposits","State","PreCommitDeposits","locked","LockedFunds","collateral","Balance","available","cached","localStorage","getItem","cachedTime","Date","now","JSON","parse","fetch","json","miners","address","setItem","stringify","miner","deadlinesCids","asyncPool","minerCid","ChainGetNode","deadline","Partitions","LiveSectors","TotalSectors","Raw","Number","deadlines","Promise","all","StateMinerProvingDeadline","fetchDeadlinesProxy","nextDeadlines","Array","_","Index","Close","SectorsCount","d","FaultsCount","ActiveCount","getData","preCommittedSectors","PreCommitDeadlines","groups","Object","keys","SectorNumber","Expiry","sort","Count","StateMinerSectors","sectorList","ID","number","sectorsCount","Home","id","className","slice","to","Summary","title","desc","href","WindowPoStStatus","Math","round","ceil","v","f2","Status","spa","useState","minersDeadlines","setMinersDeadlines","minersDeadlines2880","setMinersDeadlines2880","prev60","setPrev60","prev120","setPrev120","useEffect","getPrev","diff","fetchTipsetHead","prevHead","fetchPower","prevSpa","fetchingPrevious","mounted","minersList","minerId","fetchDeadlines","deadlines2880","parseInt","WindowPoSt","link","out","Full","setHead","fetchHead","fetched","fetchingHead","MinerBar","deadlineId","tag","name","location","flagEmoji","withRouter","useParams","partitions","setPartitions","minerDeadlines","setMinerDeadlines","todayDeadlines","setTodayDeadlines","fetchPartitionsSectors","then","epochs","day","e","data-tip","data-for","effect","place","k","flat","partition","sector","setMiner","catch","error","fetchDeposits","deposits","fetchPreCommittedSectors","preCommits","PostSubmissions","FaultCutoff","Challenge","Open","getFilecoinExpectedHeight","filGenesis","getTime","floor","TinySummary","expected","setFilExpectedHeight","setRound","Drand","current","interval","setInterval","clearInterval","App","setMiners","setNode","setFilClient","reload","getMiners","onChange","target","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.933ccb20.chunk.js","sourcesContent":["import { LotusRPC } from '@filecoin-shipyard/lotus-client-rpc'\nimport { BrowserProvider } from '@filecoin-shipyard/lotus-client-provider-browser'\nimport Fil from 'js-hamt-filecoin'\nimport { partition } from 'd3'\nimport asyncPool from 'tiny-async-pool'\nconst d3 = require('d3')\nconst f = d3.format('0.2f')\nconst bx = require('base-x')\nconst BASE64 =\n  'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nconst b64 = bx(BASE64)\nconst BN = require('bn.js')\n\nconst schema = require('@filecoin-shipyard/lotus-client-schema').testnet\n  .fullNode\n\nfunction b64ToBn (b64) {\n  if (b64 === '') return window.BigInt(0)\n  var bin = atob(b64)\n  var hex = []\n\n  bin.split('').forEach(function (ch) {\n    var h = ch.charCodeAt(0).toString(16)\n    if (h.length % 2) {\n      h = '0' + h\n    }\n    hex.push(h)\n  })\n\n  return window.BigInt('0x' + hex.join(''))\n}\n\nconst partitionSchema = height => {\n  if (height >= 138720) {\n    return {\n      Sectors: 'buffer',\n      Unproven: 'buffer',\n      Faults: 'buffer',\n      Recoveries: 'buffer',\n      Terminated: 'buffer',\n      ExpirationEpochs: 'cid',\n      EarlyTerminated: 'cid',\n      LivePower: {\n        a: 'bigint',\n        b: 'bigint'\n      },\n      UnprovenPower: {\n        a: 'bigint',\n        b: 'bigint'\n      },\n      FaultyPower: {\n        a: 'bigint',\n        b: 'bigint'\n      },\n      RecoveringPower: {\n        a: 'bigint',\n        b: 'bigint'\n      }\n    }\n  }\n  return {\n    Sectors: 'buffer',\n    Faults: 'buffer',\n    Recoveries: 'buffer',\n    Terminated: 'buffer',\n    ExpirationEpochs: 'cid',\n    EarlyTerminated: 'cid',\n    LivePower: {\n      a: 'bigint',\n      b: 'bigint'\n    },\n    FaultyPower: {\n      a: 'bigint',\n      b: 'bigint'\n    },\n    RecoveringPower: {\n      a: 'bigint',\n      b: 'bigint'\n    }\n  }\n}\n\nconst preCommitSchema = {\n  type: 'hamt',\n  key: 'bigint',\n  value: {\n    info: {\n      seal_proof: 'int',\n      sector_number: 'int',\n      sealed_cid: 'cid',\n      seal_rand_epoch: 'int',\n      deal_ids: ['list', 'int'],\n      expiration: 'int',\n      replace_capacity: 'bool',\n      replace_sector_deadline: 'int',\n      replace_sector_partition: 'int',\n      replace_sector_number: 'int'\n    },\n    precommit_deposit: 'bigint',\n    precommit_epoch: 'int',\n    deal_weight: 'bigint',\n    verified_deal_weight: 'bigint'\n  }\n}\n\nfunction bytesToBig (p) {\n  let acc = 0n\n  for (let i = 0; i < p.length; i++) {\n    acc *= 256n\n    acc += window.BigInt(p[i])\n  }\n  return acc\n}\n\nfunction bytesToBigRev (p) {\n  let acc = new BN(0)\n  for (let i = 0; i < p.length; i++) {\n    acc = acc.mul(new BN(256))\n    acc = acc.add(new BN(p[p.length - i - 1]))\n  }\n  return acc\n}\n\nfunction nextBits (obj, n) {\n  // if (obj.left < n) throw new Error(\"out of bits\")\n  const res = obj.num.and(new BN(1).shln(n).sub(new BN(1)))\n  obj.num = obj.num.shrn(n)\n  obj.left -= n\n  return res.toNumber()\n}\n\nfunction decodeRLE (buf) {\n  const obj = {\n    left: 8 * buf.length,\n    num: bytesToBigRev(buf)\n  }\n  const version = nextBits(obj, 2)\n  const first = nextBits(obj, 1)\n  const res = []\n  while (obj.left > 0) {\n    let b1 = nextBits(obj, 1)\n    if (b1 === 1) {\n      res.push(1)\n      continue\n    }\n    let b2 = nextBits(obj, 1)\n    if (b2 === 1) {\n      const a = nextBits(obj, 4)\n      res.push(a)\n      continue\n    }\n    let x = 0\n    let s = 0\n    for (let i = 0; true; i++) {\n      if (i === 10) {\n        throw new Error('run too long')\n      }\n      let b = nextBits(obj, 8)\n      if (b < 0x80) {\n        if (i > 9 || (i === 9 && b > 1)) {\n          throw new Error('run too long')\n        } else if (b === 0 && s > 0) {\n          throw new Error('invalid run')\n        }\n        x |= b << s\n        break\n      }\n      x |= (b & 0x7f) << s\n      s += 7\n    }\n    res.push(x)\n  }\n  return { first, runs: res }\n}\n\nfunction decodeRLE2 (buf) {\n  const { first, runs } = decodeRLE(buf)\n  let cur = first\n  const res = []\n  let acc = 0\n  for (let r of runs) {\n    for (let i = 0; i < r; i++) {\n      if (cur === 1) res.push(acc)\n      acc++\n    }\n    cur = 1 - cur\n  }\n  return res\n}\n\nexport default class Filecoin {\n  constructor (endpointUrl) {\n    this.url = endpointUrl\n    const provider = new BrowserProvider(endpointUrl)\n    console.log('new endpoint', endpointUrl)\n    this.client = new LotusRPC(provider, { schema })\n  }\n\n  async getData (head, path, schema) {\n    const state = head.Blocks[0].ParentStateRoot['/']\n    const node =\n      head.Height >= 138720 ? `${state}/1/${path}` : `${state}/${path}`\n    const data = (await this.client.chainGetNode(node)).Obj\n\n    const self = this\n    return await Fil.methods.decode(schema, data).asObject(async a => {\n      const res = await self.client.chainGetNode(a)\n      return res.Obj\n    })\n  }\n\n  async fetchHead () {\n    return await this.client.chainHead()\n  }\n\n  async fetchPartitionsSectors (cid) {\n    const node = (await this.client.chainGetNode(`${cid['/']}`)).Obj[2][2]\n    return node.map(partitionRaw => {\n      const partitionObj = Fil.methods.decode(partitionSchema, partitionRaw)\n      return [\n        {\n          Sectors: decodeRLE2(partitionObj.Sectors),\n          Faults: decodeRLE2(partitionObj.Faults).reduce((acc, curr) => {\n            acc[curr] = true\n            return acc\n          }, {}),\n          Terminated: decodeRLE2(partitionObj.Terminated).reduce(\n            (acc, curr) => {\n              acc[curr] = true\n              return acc\n            },\n            {}\n          ),\n          Recoveries: decodeRLE2(partitionObj.Recoveries).reduce(\n            (acc, curr) => {\n              acc[curr] = true\n              return acc\n            },\n            {}\n          )\n        }\n      ]\n    })\n  }\n\n  async fetchTipsetHead (height) {\n    return await this.client.ChainGetTipSetByHeight(height, null)\n  }\n\n  async fetchPower (head) {\n    const state = head.Blocks[0].ParentStateRoot['/']\n    const node =\n      head.Height >= 138720 ? `${state}/1/@Ha:t04/1` : `${state}/@Ha:t04/1`\n    const storagePowerActorRaw = (await this.client.chainGetNode(node)).Obj\n    return {\n      TotalRawBytePower: bytesToBig(b64.decode(storagePowerActorRaw[0])),\n      TotalBytesCommitted: bytesToBig(b64.decode(storagePowerActorRaw[1])),\n      TotalQualityAdjPower: bytesToBig(b64.decode(storagePowerActorRaw[2])),\n      TotalQABytesCommitted: bytesToBig(b64.decode(storagePowerActorRaw[3])),\n      TotalPledgeCollateral: bytesToBig(b64.decode(storagePowerActorRaw[4])),\n      ThisEpochRawBytePower: bytesToBig(b64.decode(storagePowerActorRaw[5])),\n      ThisEpochQualityAdjPower: bytesToBig(b64.decode(storagePowerActorRaw[6])),\n      ThisEpochPledgeCollateral: bytesToBig(b64.decode(storagePowerActorRaw[7]))\n    }\n  }\n\n  async fetchDeposits (hash, head) {\n    const state = await this.client.StateReadState(hash, head.Cids)\n    const precommitdeposits = state.State.PreCommitDeposits\n    const locked = state.State.LockedFunds\n    const collateral = state.Balance\n    const available = collateral - precommitdeposits - locked\n\n    return {\n      collateral: f(state.Balance / 1000000000000000000),\n      available: f(available / 1000000000000000000),\n      locked: f(locked / 1000000000000000000),\n      precommitdeposits: f(precommitdeposits / 1000000000000000000)\n    }\n  }\n\n  async getMiners () {\n    const cached = window.localStorage.getItem('miners')\n    const cachedTime = window.localStorage.getItem('time')\n    if (cached && cachedTime && Date.now() - +cachedTime > 60000)\n      return JSON.parse(cached)\n\n    const json = await (\n      await fetch('https://filfox.info/api/v0/miner/list/power?pageSize=1000')\n    ).json()\n    const miners = json.miners.reduce((acc, curr) => {\n      acc[curr.address] = curr\n      return acc\n    }, {})\n\n    window.localStorage.setItem('miners', JSON.stringify(miners))\n    window.localStorage.setItem('time', Date.now())\n\n    return miners\n  }\n\n  async fetchDeadlinesProxy (miner, head) {\n    const state = head.Blocks[0].ParentStateRoot['/']\n    const node =\n      head.Height >= 138720\n        ? `${state}/1/@Ha:${miner}/1/12`\n        : `${state}/@Ha:${miner}/1/11`\n    const deadlinesCids = (await this.client.chainGetNode(node)).Obj[0]\n\n    const deadlines = await asyncPool(24, deadlinesCids, async minerCid => {\n      const deadline = (await this.client.ChainGetNode(`${minerCid['/']}`)).Obj\n      return {\n        Partitions: deadline[0],\n        LiveSectors: deadline[4],\n        TotalSectors: deadline[5],\n        FaultyPower: { Raw: Number(b64ToBn(deadline[6][0])) }\n      }\n    })\n    return deadlines\n  }\n\n  async fetchDeadlines (hash, head) {\n    const [deadline, deadlines] = await Promise.all([\n      this.client.StateMinerProvingDeadline(hash, head.Cids),\n      this.fetchDeadlinesProxy(hash, head)\n    ])\n    console.log('>>> got deadline and deadline')\n\n    const nextDeadlines = [...Array(48)].map((_, i) => ({\n      ...deadlines[(deadline.Index + i) % 48],\n      Close: deadline.Close + i * 60,\n      Index: (deadline.Index + i) % 48\n    }))\n\n    const SectorsCount = deadlines\n      .map(d => +d.LiveSectors)\n      .reduce((acc, curr) => acc + curr, 0)\n\n    const FaultsCount =\n      deadlines\n        .map(d => +d.FaultyPower.Raw)\n        .reduce((acc, curr) => acc + curr, 0) /\n      (32 * 1024 * 1024 * 1024)\n\n    return {\n      deadlines: deadlines.map((d, i) => ({\n        ...deadlines[i],\n        Close: deadline.Close + i * 60,\n        Index: i\n      })),\n      nextDeadlines,\n      SectorsCount,\n      FaultsCount,\n      ActiveCount: SectorsCount - FaultsCount,\n      deadline\n    }\n  }\n\n  async fetchPreCommittedSectors (hash, head) {\n    const node = head.Height >= 138720 ? `@Ha:${hash}/1/6` : `@Ha:${hash}/1/5`\n    const preCommittedSectors = await this.getData(head, node, preCommitSchema)\n    const PreCommitDeadlines = d3\n      .groups(\n        Object.keys(preCommittedSectors).map(d => ({\n          SectorNumber: preCommittedSectors[d].info.sector_number,\n          Expiry: preCommittedSectors[d].precommit_epoch + (10000 + 60 + 150)\n        })),\n        d => d.Expiry\n      )\n      .map(([Expiry, Sectors]) => ({\n        Expiry,\n        Sectors: Sectors.map(d => d.SectorNumber)\n      }))\n      .sort((a, b) => a.Expiry - b.Expiry)\n\n    return {\n      PreCommitDeadlines,\n      Count: Object.keys(preCommittedSectors).length\n    }\n  }\n\n  async fetchSectors (hash, head) {\n    const sectorList = await this.client.StateMinerSectors(\n      hash,\n      null,\n      head.Cids\n    )\n    const Sectors = sectorList.reduce((acc, curr) => {\n      acc[curr.ID] = { number: curr.ID, info: curr }\n      return acc\n    }, {})\n\n    const sectorsCount = Object.keys(Sectors).length\n    return { sectorsCount, Sectors }\n  }\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nexport default function Home ({ miners }) {\n  return (\n    <section id='home' className='container'>\n      <div className='spacerace'>\n        Top miners:\n        {miners &&\n          Object.keys(miners)\n            .slice(0, 15)\n            .map((d, i) => (\n              <div key={i}>\n                {i + 1}.{' '}\n                <Link to={`/miners/${miners[d].address}`}>\n                  {miners[d].address}\n                </Link>\n              </div>\n            ))}\n      </div>\n      <div>\n        See deadlines of <Link to='/full'>top 50 miners</Link> or click on\n        individual miners or the <Link to='/status'>network status</Link>.\n      </div>\n    </section>\n  )\n}\n","import React from 'react'\n\nexport default function Summary ({ title, url, desc }) {\n  return (\n    <div className='summary col-sm'>\n      <div className='summary-title'>\n        {url ? <a href={url}>{title}</a> : <>{title}</>}\n      </div>\n      <div className='summary-desc'>{desc}</div>\n    </div>\n  )\n}\n","import React from 'react'\n\nexport default function WindowPoStStatus ({ deadline, head }) {\n  const d = deadline\n\n  return (\n    <div className='deadlines windowpost'>\n      <div className={d.LiveSectors === 0 ? 'deadline opacity5' : 'deadline'}>\n        <div className='out'>\n          In {d.Close - head.Height}\n          {/* <span className=\"epochs\">epochs</span> */}\n        </div>\n        <div className='hddWrapper'>\n          <div className='in'>\n            {Math.round((d.LiveSectors * 32) / 1024)} TiB\n          </div>\n          <div className='hdds'>\n            {[\n              ...Array(\n                Math.ceil(\n                  Math.round(\n                    (d.LiveSectors * 32) / 1024 -\n                      +d.FaultyPower.Raw / (1024 * 1024 * 1024 * 1024)\n                  ) / 8\n                )\n              )\n            ].map((v, i) => (\n              <div key={i} className='hdd'>\n                {' '}\n              </div>\n            ))}\n            {[\n              ...Array(\n                Math.ceil(\n                  Math.round(+d.FaultyPower.Raw / (1024 * 1024 * 1024 * 1024)) /\n                    8\n                )\n              )\n            ].map((v, i) => (\n              <div key={i} className='hdd faulty'>\n                {' '}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport asyncPool from 'tiny-async-pool'\nimport { Link } from 'react-router-dom'\nimport Summary from '../components/Summary'\nimport WindowPoStStatus from '../components/WindowPoStStatus'\n\nconst d3 = require('d3')\nconst f2 = d3.format(',.2f')\nconst bytesToPiB = 1024 * 1024 * 1024 * 1024 * 1024\n\nexport default function Status ({ client, spa, head, miners }) {\n  const [minersDeadlines, setMinersDeadlines] = useState({})\n  const [minersDeadlines2880, setMinersDeadlines2880] = useState({})\n  const [prev60, setPrev60] = useState()\n  const [prev120, setPrev120] = useState()\n\n  useEffect(() => {\n    if (!head) return\n\n    const fetchingPrevious = async () => {\n      const getPrev = async diff => {\n        const prevHead = await client.fetchTipsetHead(head.Height - diff)\n        const prevSpa = await client.fetchPower(prevHead)\n        return prevSpa\n      }\n\n      const [prev60, prev120] = await Promise.all([getPrev(60), getPrev(120)])\n\n      await setPrev60(prev60)\n      await setPrev120(prev120)\n    }\n    fetchingPrevious()\n  }, [head])\n\n  useEffect(() => {\n    let mounted = true\n    if (!head) return\n\n    const minersList = Object.keys(miners)\n      .slice(0, 40)\n      .map(d => miners[d].address)\n    asyncPool(5, minersList, async minerId => {\n      if (!mounted) return\n      const deadlines = await client.fetchDeadlines(minerId, head)\n      if (!mounted) return\n      const prevHead = await client.fetchTipsetHead(head.Height - 2880)\n      if (!mounted) return\n      const deadlines2880 = await client.fetchDeadlines(minerId, prevHead)\n      if (!mounted) return\n      minersDeadlines[minerId] = deadlines\n      minersDeadlines2880[minerId] = deadlines2880\n      await setMinersDeadlines({ ...minersDeadlines })\n      return await setMinersDeadlines2880({ ...minersDeadlines2880 })\n    })\n\n    return () => {\n      mounted = false\n    }\n  }, [client, head, miners])\n\n  return (\n    <section className='container'>\n      <div id='deposits' className='section'>\n        <div className='grid'>\n          {spa && (\n            <>\n              <Summary\n                title={f2(parseInt(spa.TotalQualityAdjPower) / bytesToPiB)}\n                desc='Total QA Power'\n              />\n            </>\n          )}\n          {prev60 && spa && (\n            <>\n              <Summary\n                title={f2(\n                  parseInt(\n                    spa.TotalQualityAdjPower - prev60.TotalQualityAdjPower\n                  ) / bytesToPiB\n                )}\n                desc='60 Epochs delta'\n              />\n            </>\n          )}\n          {prev120 && spa && (\n            <>\n              <Summary\n                title={f2(\n                  parseInt(\n                    spa.TotalQualityAdjPower - prev120.TotalQualityAdjPower\n                  ) / bytesToPiB\n                )}\n                desc='120 Epochs delta'\n              />\n            </>\n          )}\n        </div>\n      </div>\n      Listing WindowPoSt duties of the top 50 miners.\n      {miners &&\n        Object.keys(miners)\n          .slice(0, 40)\n          .map((d, i) => (\n            <div className='flex' key={i}>\n              <Link to={`/miners/${miners[d].address}`}>\n                {miners[d].address}\n              </Link>\n              {minersDeadlines && minersDeadlines[miners[d].address] && (\n                <WindowPoStStatus\n                  head={head}\n                  deadline={\n                    minersDeadlines[miners[d].address].nextDeadlines[47]\n                  }\n                />\n              )}\n              {minersDeadlines2880 &&\n                minersDeadlines2880[miners[d].address] && (\n                  <WindowPoStStatus\n                    head={head}\n                    deadline={\n                      minersDeadlines2880[miners[d].address].nextDeadlines[47]\n                    }\n                  />\n                )}\n            </div>\n          ))}\n    </section>\n  )\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nexport default function WindowPoSt ({ minerId, deadlines, head, link, out }) {\n  if (!link) {\n    link = d => `/miners/${minerId}/deadlines/${d.Index}`\n  }\n  if (!out) {\n    out = ({ d, head, i }) => `In ${d.Close - head.Height}`\n  }\n  if (!head || !deadlines) {\n    return <></>\n  }\n  return (\n    <div className='deadlines windowpost'>\n      {deadlines &&\n        deadlines.map((d, i) => (\n          <div\n            key={i}\n            className={d.LiveSectors === 0 ? 'deadline opacity5' : 'deadline'}\n          >\n            <Link to={link(d)}>\n              <div className='out'>\n                {out({ d, head, i })}\n                {/* <span className=\"epochs\">epochs</span> */}\n              </div>\n              <div className='hddWrapper'>\n                <div className='in'>\n                  {Math.round((d.LiveSectors * 32) / 1024)} TiB\n                </div>\n                <div className='hdds'>\n                  {[\n                    ...Array(\n                      Math.ceil(\n                        Math.round(\n                          (d.LiveSectors * 32) / 1024 -\n                            +d.FaultyPower.Raw / (1024 * 1024 * 1024 * 1024)\n                        ) / 8\n                      )\n                    )\n                  ].map((v, i) => (\n                    <div key={i} className='hdd'>\n                      {' '}\n                    </div>\n                  ))}\n                  {/* {Math.round(+d.FaultyPower.Raw / (1024 * 1024 * 1024 * 1024))} */}\n                  {[\n                    ...Array(\n                      Math.ceil(\n                        Math.round(\n                          +d.FaultyPower.Raw / (1024 * 1024 * 1024 * 1024)\n                        ) / 8\n                      )\n                    )\n                  ].map((v, i) => (\n                    <div key={i} className='hdd faulty'>\n                      {' '}\n                    </div>\n                  ))}\n                </div>\n              </div>\n              {/* <div className=\"partitions\">\n                            {\n                            [...Array(Math.ceil(d.LiveSectors/2349))].map(v =>\n                            <div className='partition'></div>\n                            )\n                            }\n                            </div> */}\n            </Link>\n          </div>\n        ))}\n    </div>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport asyncPool from 'tiny-async-pool'\n\nimport WindowPoSt from '../components/WindowPoSt'\n\nexport default function Full ({ miners, client }) {\n  const [minersDeadlines, setMinersDeadlines] = useState({})\n  const [head, setHead] = useState()\n\n  useEffect(() => {\n    const fetchingHead = async () => {\n      const fetched = await client.fetchHead()\n      setHead(fetched)\n    }\n    fetchingHead()\n  }, [client])\n\n  useEffect(() => {\n    let mounted = true\n    if (!head) return\n\n    const minersList = Object.keys(miners)\n      .slice(0, 50)\n      .map(d => miners[d].address)\n    asyncPool(5, minersList, async minerId => {\n      if (!mounted) return\n      const deadlines = await client.fetchDeadlines(minerId, head)\n      if (!mounted) return\n      minersDeadlines[minerId] = deadlines.nextDeadlines\n      return await setMinersDeadlines({ ...minersDeadlines })\n    })\n\n    return () => {\n      mounted = false\n    }\n  }, [client, head, miners])\n\n  return (\n    <section id='LookUp' className='container'>\n      Listing WindowPoSt duties of the top 50 miners.\n      {miners &&\n        Object.keys(miners)\n          .slice(0, 50)\n          .map((d, i) => (\n            <div key={i}>\n              <Link to={`/miners/${miners[d].address}`}>\n                {miners[d].address}\n              </Link>\n\n              <WindowPoSt\n                deadlines={minersDeadlines[miners[d].address]}\n                head={head}\n              />\n            </div>\n          ))}\n    </section>\n  )\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nexport default function MinerBar ({ client, miners, minerId, deadlineId }) {\n  return (\n    <div className='section minerbar'>\n      <div className='minerId'>\n        {!deadlineId && (\n          <>\n            <Link to={`/miners/${minerId}`}>{minerId}</Link>\n            <span className='tinyarrow'>\n              <a href={`https://filfox.info/en/address/${minerId}`}>↗</a>\n            </span>\n          </>\n        )}\n        {deadlineId && (\n          <>\n            <Link to={`/miners/${minerId}/deadlines/${deadlineId}`}>\n              Deadline {deadlineId}\n            </Link>\n          </>\n        )}\n      </div>\n      {deadlineId && (\n        <>\n          <div className='backto'>\n            <Link to={`/miners/${minerId}`}>\n              See miner\n              <span className='bolder'> {minerId}</span>\n            </Link>\n          </div>\n        </>\n      )}\n      {!deadlineId && (\n        <div>\n          {miners && miners[minerId] && miners[minerId].tag && (\n            <span className='miner-name'>\n              {miners[minerId].tag.name}\n\n              {miners && miners[minerId].location && (\n                <span> {miners[minerId].location.flagEmoji}</span>\n              )}\n            </span>\n          )}\n        </div>\n      )}\n    </div>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { useParams, withRouter } from 'react-router-dom'\nimport ReactTooltip from 'react-tooltip'\nimport WindowPoSt from '../components/WindowPoSt'\nimport Summary from '../components/Summary'\nimport asyncPool from 'tiny-async-pool'\nimport MinerBar from '../components/MinerBar'\nconst d3 = require('d3')\nconst f = d3.format(',')\nconst f2 = d3.format(',.1f')\n\nfunction Deadline ({ miners, client, head }) {\n  const { minerId, deadlineId } = useParams()\n  const [partitions, setPartitions] = useState()\n  // const [miner, setMiner] = useState({ id: minerId })\n  const [minerDeadlines, setMinerDeadlines] = useState({})\n  const [todayDeadlines, setTodayDeadlines] = useState()\n\n  const deadlinesArray = () => {\n    return Object.keys(minerDeadlines)\n      .sort((a, b) => +a - +b)\n      .map(k => [k, minerDeadlines[k]])\n  }\n\n  const deadlineArray = i => {\n    return deadlinesArray()\n      .map(([epoch, deadlines]) => {\n        return deadlines.deadlines[i]\n      })\n      .flat()\n  }\n\n  useEffect(() => {\n    if (!todayDeadlines) return\n    client\n      .fetchPartitionsSectors(todayDeadlines.deadlines[deadlineId].Partitions)\n      .then(d => {\n        setPartitions(d)\n      })\n  }, [todayDeadlines])\n\n  useEffect(() => {\n    if (!minerId || !head || !deadlineId) {\n      return\n    }\n\n    let mounted = true\n    let firstTime = true\n    const continueLoad = () => firstTime || mounted\n\n    const epochs = [...Array(38)].map((_, i) => ({\n      height: head.Height - i * 2880,\n      day: i\n    }))\n\n    if (todayDeadlines) {\n      if (head.Height < todayDeadlines.deadlines[deadlineId].Close) {\n        console.log(head.Height, todayDeadlines.deadlines[deadlineId].Close)\n        return\n      }\n    }\n\n    try {\n      asyncPool(40, epochs, async ({ day, height }) => {\n        try {\n          const prevHead = await client.fetchTipsetHead(height)\n          if (!continueLoad()) return\n          const deadlines = await client.fetchDeadlines(minerId, prevHead)\n          if (!continueLoad()) return\n          minerDeadlines[day] = deadlines\n          setMinerDeadlines({ ...minerDeadlines })\n          if (day === 0) {\n            setTodayDeadlines(deadlines)\n          }\n        } catch (e) {\n          console.log('could not find', day, height)\n        }\n      })\n    } catch (e) {\n      console.log('trouble with ', e)\n    }\n\n    return () => {\n      mounted = false\n    }\n  }, [client, head, minerId, deadlineId, todayDeadlines])\n\n  return (\n    <section className='container'>\n      <MinerBar\n        client={client}\n        miners={miners}\n        minerId={minerId}\n        deadlineId={deadlineId}\n      />\n      <div className='section wpost'>\n        <div className='grid'>\n          {minerDeadlines && minerDeadlines[0] && (\n            <Summary\n              title={`${f2(\n                (+minerDeadlines[0].deadlines[deadlineId].LiveSectors * 32) /\n                  1024\n              )} TiB`}\n              desc={`${f(\n                minerDeadlines[0].deadlines[deadlineId].LiveSectors\n              )} Live Sectors`}\n            />\n          )}\n          {minerDeadlines && minerDeadlines[0] && (\n            <Summary\n              title={`${f2(\n                +minerDeadlines[0].deadlines[deadlineId].FaultyPower.Raw /\n                  (1024 * 1024 * 1024 * 1024)\n              )} TiB`}\n              desc={`${f(\n                +minerDeadlines[0].deadlines[deadlineId].FaultyPower.Raw /\n                  ((1024 * 1024 * 1024 * 1024) / 32)\n              )} Faulty Sectors`}\n            />\n          )}\n        </div>\n      </div>\n      <div className='section wpost'>\n        <div className='row'>\n          <div className='col section-title'>\n            <h3>History</h3>\n            <a data-tip data-for='wpost-desc'>\n              (what is this?)\n            </a>\n            <ReactTooltip id='wpost-desc' effect='solid' place='top'>\n              <span>\n                List of 48 WindowPoSt submission deadlines ordered by due time\n                (in epochs).\n                <br />\n                Bars represent ~8TB disks to be proven, white are healthy disks,\n                red are faulty.\n              </span>\n            </ReactTooltip>\n          </div>\n        </div>\n        <WindowPoSt\n          link={d => `/miners/${minerId}/deadlines/${deadlineId}`}\n          deadlines={deadlineArray(deadlineId)}\n          head={head}\n          out={({ d, head, i }) => (i === 0 ? `Today` : `${i}d ago`)}\n        />\n      </div>\n      <div className='section sectors'>\n        <div className='row'>\n          <div className='col section-title'>\n            <h3>Sectors</h3>\n            <a data-tip data-for='sectors-desc'>\n              (what is this?)\n            </a>\n            <ReactTooltip id='sectors-desc' effect='solid' place='top'>\n              <span>Each square is a 32GiB sector.</span>\n            </ReactTooltip>\n          </div>\n        </div>\n        {partitions && (\n          <div>\n            {partitions.map((partition, i) => (\n              <div key={i}>\n                <h4>\n                  Partition {i}{' '}\n                  {Object.keys(partition[0].Faults).length ===\n                    partition[0].Sectors.length && (\n                    <span className='rekt'>REKT</span>\n                  )}\n                </h4>\n                <div className='s-partition'>\n                  {partition[0].Sectors.map(sector => (\n                    <div\n                      key={sector}\n                      className={`s-sector ${partition[0].Faults[sector] &&\n                        'faulty'} ${partition[0].Terminated[sector] &&\n                        'terminated'} ${partition[0].Recoveries[sector] &&\n                        'recovering'}`}\n                    >\n                      <span>{sector}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </section>\n  )\n}\n\nexport default withRouter(Deadline)\n","import React, { useState, useEffect } from 'react'\nimport { useParams, withRouter } from 'react-router-dom'\n\nimport Summary from '../components/Summary'\nimport ReactTooltip from 'react-tooltip'\nimport WindowPoSt from '../components/WindowPoSt'\nimport MinerBar from '../components/MinerBar'\n\nconst d3 = require('d3')\nconst f = d3.format(',')\nconst f2 = d3.format(',.0f')\n\nfunction MinerInfo ({ client, miners, head }) {\n  const { minerId } = useParams()\n  const [miner, setMiner] = useState({ id: minerId })\n\n  // On new (hash or head): fetch miner\n  useEffect(() => {\n    if (!minerId || !head || !client) {\n      return\n    }\n\n    let mounted = true\n\n    const fetchInfo = () => {\n      setMiner({ ...miner })\n\n      client\n        .fetchDeadlines(minerId, head)\n        .then(deadlines => {\n          if (mounted) {\n            miner.deadlines = deadlines\n            setMiner({ ...miner })\n            console.log('deadlines setting')\n          }\n        })\n        .catch(e => {\n          console.error('failed to fetch deadlines')\n        })\n\n      client\n        .fetchDeposits(minerId, head)\n        .then(deposits => {\n          if (mounted) {\n            miner.deposits = deposits\n            setMiner({ ...miner })\n          }\n        })\n        .catch(e => {\n          console.error('failed to fetch deposits')\n        })\n\n      client\n        .fetchPreCommittedSectors(minerId, head)\n        .then(preCommits => {\n          if (mounted) {\n            miner.preCommits = preCommits\n            setMiner({ ...miner })\n          }\n        })\n        .catch(e => {\n          console.error('failed to fetch precommitted sectors', e)\n        })\n    }\n\n    fetchInfo()\n\n    return () => {\n      mounted = false\n    }\n  }, [client, head, minerId])\n\n  if (!miner || !head) {\n    return <></>\n  }\n\n  return (\n    <section className='container'>\n      <MinerBar client={client} miners={miners} minerId={minerId} />\n      <div id='deposits' className='section'>\n        <div className='grid'>\n          {miner.deposits && (\n            <Summary\n              title={`${f(miner.deposits.collateral || 0)} FIL`}\n              desc='Collateral'\n            />\n          )}\n\n          {miner.deposits && (\n            <Summary\n              title={`${f(miner.deposits.available || 0)} FIL`}\n              desc='Available'\n            />\n          )}\n\n          {miner.deposits && (\n            <Summary\n              desc='Locked'\n              title={`${f(miner.deposits.locked || 0)} FIL`}\n            />\n          )}\n        </div>\n      </div>\n\n      <div id='sectors'>\n        <div className='grid grid-4'>\n          {miner.deadlines && (\n            <Summary\n              title={`${f2((miner.deadlines.SectorsCount * 32) / 1024)} TiB`}\n              desc={`${f(miner.deadlines.SectorsCount || 0)} Total Sectors`}\n            />\n          )}\n          {miner.deadlines && (\n            <Summary\n              title={`${f2((miner.deadlines.ActiveCount * 32) / 1024)} TiB`}\n              desc={`${f(miner.deadlines.ActiveCount || 0)} Active Sectors`}\n            />\n          )}\n          {miner.deadlines && (\n            <Summary\n              title={`${f2((miner.deadlines.FaultsCount * 32) / 1024)} TiB`}\n              desc={`${f(miner.deadlines.FaultsCount || 0)} Faulty Sectors`}\n            />\n          )}\n          {miner.preCommits && (\n            <Summary title={f(miner.preCommits.Count || 0)} desc='PreCommits' />\n          )}\n        </div>\n      </div>\n\n      {miner.deadlines && (\n        <div className='section wpost'>\n          <div className='row'>\n            <div className='col section-title'>\n              <h3>Deadlines</h3>\n              <a data-tip data-for='wpost-desc'>\n                (what is this?)\n              </a>\n              <ReactTooltip id='wpost-desc' effect='solid' place='top'>\n                <span>\n                  List of 48 WindoPoSt submission deadlines ordered by due time\n                  (in epochs).\n                  <br />\n                  Bars represent ~8TB disks to be proven, white are healthy\n                  disks, red are faulty.\n                </span>\n              </ReactTooltip>\n            </div>\n          </div>\n          <WindowPoSt\n            minerId={minerId}\n            deadlines={miner.deadlines.nextDeadlines}\n            head={head}\n          />\n        </div>\n      )}\n\n      {miner.deadlines && (\n        <div className='section'>\n          <div className='row'>\n            <div className='col section-title'>\n              <h3>Upcoming Deadline</h3>\n            </div>\n          </div>\n          <div className='row'>\n            <div className='col'>\n              <div className='timeline'></div>\n              <ul>\n                <li>\n                  PoStSubmissions:\n                  {miner.deadlines.nextDeadlines[0].PostSubmissions}\n                </li>\n                <li>\n                  Sectors to Prove:{' '}\n                  {miner.deadlines.nextDeadlines[0].LiveSectors}\n                </li>\n                <li>Current Deadline: {miner.deadlines.deadline.Index}</li>\n                <li>\n                  FaultCutoff:{' '}\n                  {miner.deadlines.deadline.FaultCutoff - head.Height}\n                </li>\n                <li>\n                  Challenge: {miner.deadlines.deadline.Challenge - head.Height}\n                </li>\n                <li>\n                  {miner.deadlines.deadline.Open - head.Height > 0\n                    ? 'Open'\n                    : 'Opened'}\n                  : {miner.deadlines.deadline.Open - head.Height}\n                </li>\n                <li>Close: {miner.deadlines.deadline.Close - head.Height}</li>\n              </ul>\n            </div>\n            <div className='col'>\n              <WindowPoSt\n                minerId={minerId}\n                deadlines={[miner.deadlines.nextDeadlines[0]]}\n                head={head}\n              />\n            </div>\n          </div>\n        </div>\n      )}\n\n      {miner.preCommits && (\n        <div id='provecommit' className='section'>\n          <div className='row'>\n            <div className='col section-title'>\n              <h3>New sectors</h3>\n              <a data-tip data-for='provecommit-desc'>\n                (what is this?)\n              </a>\n              <ReactTooltip id='provecommit-desc' effect='solid' place='top'>\n                <span>\n                  List of ProveCommits ordered by due time (in epochs).\n                  <br />\n                  Circles represent sectors to be proven.\n                </span>\n              </ReactTooltip>\n            </div>\n          </div>\n          <div className='deadlines provecommit'>\n            {miner.preCommits.PreCommitDeadlines.map((d, i) => (\n              <div key={i} className='deadline'>\n                <div className='out'>\n                  In {d.Expiry - head.Height}\n                  {/* <span className=\"epochs\">epochs</span> */}\n                </div>\n                <div className='hddWrapper'>\n                  <div className='in'>\n                    {Math.round(d.Sectors.length)} sectors\n                  </div>\n                  <div className='hdds'>\n                    {d.Sectors.map(v => (\n                      <div key={v} className='hdd'>\n                        {''}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </section>\n  )\n}\n\nexport default withRouter(MinerInfo)\n","export default async function () {\n  return await (await fetch('https://api3.drand.sh/health')).json()\n}\n","import React, { useState, useEffect } from 'react'\nimport Drand from '../services/drand'\n\nconst d3 = require('d3')\nconst f = d3.format(',')\n\nfunction getFilecoinExpectedHeight () {\n  const filGenesis = new Date('2020-08-24 22:00:00Z').getTime()\n  return Math.floor((Date.now() - filGenesis) / 1000 / 30)\n}\n\nexport default function TinySummary ({ client, head }) {\n  const [expected, setFilExpectedHeight] = useState(getFilecoinExpectedHeight())\n  const [round, setRound] = useState()\n\n  useEffect(() => {\n    let mounted = true\n\n    const fetchingHead = async () => {\n      Drand().then(fetched => {\n        if (!mounted) return\n        if (round && fetched.current === round.current) {\n          console.log('   repeated drand, skip')\n          return\n        }\n        console.log('   new drand', fetched)\n        setRound(fetched)\n      })\n\n      if (getFilecoinExpectedHeight() !== expected) {\n        setFilExpectedHeight(getFilecoinExpectedHeight())\n      }\n    }\n\n    fetchingHead()\n\n    const interval = setInterval(() => {\n      if (mounted) {\n        fetchingHead()\n      }\n    }, 5000)\n\n    return () => {\n      mounted = false\n      clearInterval(interval)\n      console.log('removing interval')\n    }\n  }, [client, head, round])\n\n  return (\n    <div className='tiny-grid'>\n      {head && expected && (\n        <div>\n          Filecoin Status{' '}\n          <span>\n            {head.Height < expected\n              ? expected - head.Height === 1\n                ? 'gathering blocks'\n                : 'catching up'\n              : 'ok'}\n          </span>\n        </div>\n      )}\n      {head && (\n        <div className='tiny'>\n          Current Tipset{' '}\n          <a href={`https://filfox.info/en/tipset/${head.Height}`}>\n            {f(head.Height)}\n          </a>\n        </div>\n      )}\n      {expected && (\n        <div className='tiny'>\n          Expected Tipset{' '}\n          <a href={`https://filfox.info/en/tipset/${expected}`}>\n            {f(expected)}\n          </a>\n        </div>\n      )}\n      {round && (\n        <>\n          <div className='tiny'>\n            Drand Status{' '}\n            <span>{round.current < round.expected ? 'catching up' : 'ok'}</span>\n          </div>\n          <div className='tiny'>\n            Current Drand{' '}\n            <a href={`https://api.drand.sh/public/${round.current}`}>\n              {f(round.current)}\n            </a>\n          </div>\n          <div className='tiny'>\n            Expected Drand{' '}\n            <a href={`https://api.drand.sh/public/${round.expected}`}>\n              {f(round.expected)}\n            </a>\n          </div>\n        </>\n      )}\n    </div>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { HashRouter as Router, Switch, Route, Link } from 'react-router-dom'\n\nimport Filecoin from './services/filecoin'\n\nimport Home from './views/Home'\nimport Status from './views/Status'\nimport Full from './views/Full'\nimport Deadline from './views/Deadline'\nimport MinerInfo from './views/MinerInfo'\nimport TinySummary from './components/TinySummary'\n\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport './App.scss'\n\nfunction App () {\n  console.log('reloaded')\n  const [miners, setMiners] = useState()\n  const [head, setHead] = useState()\n  const [node, setNode] = useState('wss://node.glif.io/space07/lotus/rpc/v0')\n  const [client, setFilClient] = useState(new Filecoin(node))\n  const [spa, setSpa] = useState()\n\n  useEffect(() => {\n    const reload = async () => {\n      await setHead()\n      await setFilClient(new Filecoin(node))\n    }\n\n    reload()\n  }, [node])\n\n  // useEffect(() => {\n  //   if (!head) return\n\n  //   client.fetchPower(head).then(power => {\n  //     setSpa(power)\n  //   })\n  // }, [head, client])\n\n  useEffect(() => {\n    let mounted = true\n\n    client.getMiners().then(res => {\n      if (!mounted) return\n      setMiners(res)\n    })\n\n    const fetchingHead = async () => {\n      client.fetchHead().then(fetched => {\n        if (!mounted) return\n        if (head && fetched.Height === head.Height) {\n          console.log('   repeated block, skip')\n          return\n        }\n        console.log('   new block', fetched.Height, head && head.Height)\n        setHead(fetched)\n      })\n    }\n\n    fetchingHead()\n\n    const interval = setInterval(() => {\n      if (mounted) {\n        fetchingHead()\n      }\n    }, 5000)\n\n    return () => {\n      mounted = false\n      clearInterval(interval)\n      console.log('removing interval')\n    }\n  }, [client, head])\n\n  return (\n    <Router>\n      <div className='App'>\n        <div className='container'>\n          <div className='row'>\n            <div className='col'>\n              <select onChange={e => setNode(e.target.value)} value={node}>\n                <option value='wss://lotus.jimpick.com/spacerace_api/0/node/rpc/v0'>\n                  Jim's node 0\n                </option>\n                <option value='wss://lotus.jimpick.com/spacerace_api/1/node/rpc/v0'>\n                  Jim's node 1\n                </option>\n                <option value='ws://www.border.ninja:12342/node/rpc/v0'>\n                  Border's node\n                </option>\n                <option value='wss://node.glif.io/space07/lotus/rpc/v0'>\n                  Glif's node\n                </option>\n              </select>\n            </div>\n          </div>\n          <TinySummary client={client} head={head} />\n        </div>\n        <header className='container-fluid'>\n          <Link to='/'>\n            <h1 id='logo' className='logo'>\n              <span>spacegap</span>\n            </h1>\n          </Link>\n        </header>\n        <Switch>\n          <Route path='/miners/:minerId/deadlines/:deadlineId'>\n            <Deadline client={client} miners={miners} head={head} />\n          </Route>\n          <Route path='/miners/:minerId'>\n            <MinerInfo client={client} miners={miners} head={head} />\n          </Route>\n          <Route path='/full'>\n            <Full client={client} miners={miners} />\n          </Route>\n          <Route path='/status'>\n            <Status head={head} spa={spa} client={client} miners={miners} />\n          </Route>\n          <Route path='/'>\n            <Home miners={miners} />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}